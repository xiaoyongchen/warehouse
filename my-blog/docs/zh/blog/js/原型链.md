# 原型链

## 背景
  * `__proto__`, **constructor** 对象独有的。
  * **prototype**函数独有的。函数作为特殊的对象，所有也存在`__proto__`, **constructor**属性。
  * 实例的`__proto__` 对应构造函数**constructor**的原型对象`__proto__`;

:::warning
  Object.prototype.__proto__ === null

  对象的原型实例对象为V8引擎创建出来的，刻意为之，否则可能引起原型链循环引用。
  
  所以原型的祖先从这里结束
:::

## 原理
:::tip
实例的__proto__属性指向构造函数的prototype对象。

**`obj.__proto__ === Object.prototype`**

子类的继承原理, 函数的原型对象的

Object.prototype === Function.prototype.__proto__;

:::

## 原型链图
  ![image](./../../../.vuepress/public/images/proto.png)
  const fun = function() {};

## 继承

:::tip
  * Object的构造函数为Function。         Object.construct === Function;
  * Object作为Function构造出来的一个实例。 Object.__proto__ === Function.prototype;
  * Object的祖先原型对象Object.prototype.  由于继承关系。 Function.prototype.__proto__ === Object.prototype;
:::

## 证明: **`Function.__proto__ === Function.prototype`**;
  
```js
  // Function === Function.construct;
  Fuction.__proto__ === Function.construct.prototype; => Fuction.__proto__ === Function.prototype;

```

## 证明: **`Object.__proto__ === Function.prototype === Function.__proto__`**;
  
```js
  => Object.__proto__ === Object.constructor.prototype;
  => Object.constructor === Function === Function.constructor;
  => Object.__proto__ === Function.prototype === Function.__proto__; 

  // 所以
  => Object.__proto__.__proto__ === Function.prototype.__proto__.
```


## 函数对象与普通对象

```bash
  // 函数对象 js内置的函数对象
    Boolean.prototype.constructor === Boolean;
    true
    String.prototype.constructor === String;
    true
    Date.prototype.constructor === Date;
    true
    Number.prototype.constructor === Number;
    true
    Array.prototype.constructor === Array;
    true
    Object.prototype.constructor === Object;
    true
    Function.prototype.constructor === Function;
    true
    RegExp.prototype.constructor === RegExp;
    true
  // 普通对象
```

## 函数实例的继承

```bash
  const func = function() {};
  func.__proto__ === Function.prototype;
  func.__proto__ === Function.__proto__;
  func.__proto__.__proto__ === Function.prototype.__proto__ === Object.__proto__.__proto__;
  func.__proto__.__proto__  === Object.__proto__.__proto__;
```

## 对象实例的继承

```bash
  const obj = {};
  obj.__proto__ === Object.prototype;
  obj.__proto__ === Function.prototype.__proto__;
```

## 实例理解

```javastript
  // 例1
  const o = {};
  const func = {};
  Object.prototype.name = '隔壁王叔叔';

  console.log(o.name);  // 隔壁王叔叔
  console.log(o.__proto__.name);  // 隔壁王叔叔
  console.log(fun.prototype.__proto__.name); // 隔壁王叔叔
  console.log(Function.prototype.__proto__.name); // 隔壁王叔叔

  // 例子2
  Function.prototype.age = 19;
  console.log(o.age);  // 19
  console.log(o.__proto__.age);  // 19


```
  